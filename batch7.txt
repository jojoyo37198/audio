src/utils/fileValidator.ts|aW1wb3J0IHsgVmFsaWRhdGlvblJlc3VsdCwgQ1NWUm93LCBVcGxvYWRDb25maWcgfSBmcm9tICIuLi90eXBlcy91cGxvYWRUeXBlcyI7DQoNCmV4cG9ydCBjb25zdCB1cGxvYWRDb25maWc6IFVwbG9hZENvbmZpZyA9IHsNCiAgYWxsb3dlZEZvcm1hdHM6IFsiLmNzdiIsICIueGxzeCIsICIueGxzIl0sDQogIG1heEZpbGVTaXplOiAxMCwgLy8gMTBNQg0KICByZXF1aXJlZENvbHVtbnM6IFsia2V5d29yZHMiLCAicXVlc3Rpb24iLCAiYW5zd2VyIiwgImNhdGVnb3J5IiwgInByaW9yaXR5IiwgImVuYWJsZWQiLCAibGFuZ3VhZ2UiXSwNCiAgc3VwcG9ydGVkTGFuZ3VhZ2VzOiBbInpoIiwgImVuIl0NCn07DQoNCmV4cG9ydCBjb25zdCB2YWxpZGF0ZUZpbGUgPSAoZmlsZTogRmlsZSk6IFZhbGlkYXRpb25SZXN1bHQgPT4gew0KICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107DQogIGNvbnN0IHdhcm5pbmdzOiBzdHJpbmdbXSA9IFtdOw0KDQogIC8vIOaqouafpeaWh+S7tumhnuWeiw0KICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCkuc3BsaXQoIi4iKS5wb3AoKTsNCiAgaWYgKCF1cGxvYWRDb25maWcuYWxsb3dlZEZvcm1hdHMuc29tZShmb3JtYXQgPT4gZm9ybWF0LmluY2x1ZGVzKGZpbGVFeHRlbnNpb24gfHwgIiIpKSkgew0KICAgIGVycm9ycy5wdXNoKGDkuI3mlK/mj7TnmoTmqpTmoYjmoLzlvI/jgILmlK/mj7TmoLzlvI86JHt1cGxvYWRDb25maWcuYWxsb3dlZEZvcm1hdHMuam9pbigiLCAiKX1gKTsNCiAgfQ0KDQogIC8vIOaqouafpeaWh+S7tuWkp+Wwjw0KICBjb25zdCBmaWxlU2l6ZU1CID0gZmlsZS5zaXplIC8gKDEwMjQgKiAxMDI0KTsNCiAgaWYgKGZpbGVTaXplTUIgPiB1cGxvYWRDb25maWcubWF4RmlsZVNpemUpIHsNCiAgICBlcnJvcnMucHVzaChg5qqU5qGI5aSn5bCP6LaF6YGO6ZmQ5Yi2ICR7dXBsb2FkQ29uZmlnLm1heEZpbGVTaXplfU1CLOebruWJjeWkp+Wwjzoke2ZpbGVTaXplTUIudG9GaXhlZCgyKX1NQmApOw0KICB9DQoNCiAgcmV0dXJuIHsNCiAgICBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLA0KICAgIGVycm9ycywNCiAgICB3YXJuaW5ncw0KICB9Ow0KfTsNCg0KZXhwb3J0IGNvbnN0IHZhbGlkYXRlRGF0YSA9IChkYXRhOiBDU1ZSb3dbXSk6IFZhbGlkYXRpb25SZXN1bHQgPT4gew0KICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107DQogIGNvbnN0IHdhcm5pbmdzOiBzdHJpbmdbXSA9IFtdOw0KDQogIGlmICghZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkgew0KICAgIGVycm9ycy5wdXNoKCLmqpTmoYjlhaflrrnngrrnqboiKTsNCiAgICByZXR1cm4geyBpc1ZhbGlkOiBmYWxzZSwgZXJyb3JzLCB3YXJuaW5ncyB9Ow0KICB9DQoNCiAgLy8g5qqi5p+l5b+F6KaB5qyE5L2NDQogIGNvbnN0IGZpcnN0Um93ID0gZGF0YVswXTsNCiAgY29uc3QgbWlzc2luZ0NvbHVtbnMgPSB1cGxvYWRDb25maWcucmVxdWlyZWRDb2x1bW5zLmZpbHRlcigNCiAgICBjb2wgPT4gIShjb2wgaW4gZmlyc3RSb3cpDQogICk7DQoNCiAgaWYgKG1pc3NpbmdDb2x1bW5zLmxlbmd0aCA+IDApIHsNCiAgICBlcnJvcnMucHVzaChg57y65bCR5b+F6KaB5qyE5L2NOiR7bWlzc2luZ0NvbHVtbnMuam9pbigiLCAiKX1gKTsNCiAgfQ0KDQogIC8vIOmpl+itieavj+S4gOihjOaVuOaTmg0KICBkYXRhLmZvckVhY2goKHJvdywgaW5kZXgpID0+IHsNCiAgICBjb25zdCByb3dOdW1iZXIgPSBpbmRleCArIDE7DQoNCiAgICAvLyDmqqLmn6Xlv4XloavmrITkvY0NCiAgICB1cGxvYWRDb25maWcucmVxdWlyZWRDb2x1bW5zLmZvckVhY2goY29sID0+IHsNCiAgICAgIGlmICghcm93W2NvbCBhcyBrZXlvZiBDU1ZSb3ddIHx8IHJvd1tjb2wgYXMga2V5b2YgQ1NWUm93XS50cmltKCkgPT09ICIiKSB7DQogICAgICAgIGVycm9ycy5wdXNoKGDnrKwgJHtyb3dOdW1iZXJ9IOihjDoke2NvbH0g5qyE5L2N5LiN6IO954K656m6YCk7DQogICAgICB9DQogICAgfSk7DQoNCiAgICAvLyDmqqLmn6Xoqp7oqIDmoLzlvI8NCiAgICBpZiAocm93Lmxhbmd1YWdlICYmICF1cGxvYWRDb25maWcuc3VwcG9ydGVkTGFuZ3VhZ2VzLmluY2x1ZGVzKHJvdy5sYW5ndWFnZSkpIHsNCiAgICAgIGVycm9ycy5wdXNoKGDnrKwgJHtyb3dOdW1iZXJ9IOihjDrkuI3mlK/mj7TnmoToqp7oqIAgIiR7cm93Lmxhbmd1YWdlfSIs5pSv5o+0OiR7dXBsb2FkQ29uZmlnLnN1cHBvcnRlZExhbmd1YWdlcy5qb2luKCIsICIpfWApOw0KICAgIH0NCg0KICAgIC8vIOaqouafpeWEquWFiOe0muagvOW8jw0KICAgIGlmIChyb3cucHJpb3JpdHkgJiYgaXNOYU4oTnVtYmVyKHJvdy5wcmlvcml0eSkpKSB7DQogICAgICBlcnJvcnMucHVzaChg56ysICR7cm93TnVtYmVyfSDooYw65YSq5YWI57Sa5b+F6aCI5piv5pW45a2XYCk7DQogICAgfQ0KDQogICAgLy8g5qqi5p+l5ZWf55So54uA5oWL5qC85byPDQogICAgaWYgKHJvdy5lbmFibGVkICYmICFbInRydWUiLCAiZmFsc2UiLCAiMSIsICIwIl0uaW5jbHVkZXMocm93LmVuYWJsZWQudG9Mb3dlckNhc2UoKSkpIHsNCiAgICAgIHdhcm5pbmdzLnB1c2goYOesrCAke3Jvd051bWJlcn0g6KGMOuWVn+eUqOeLgOaFi+W7uuitsOS9v+eUqCB0cnVlL2ZhbHNlIOaIliAxLzBgKTsNCiAgICB9DQoNCiAgICAvLyDmqqLmn6Xpl5zpjbXlrZfmoLzlvI8NCiAgICBpZiAocm93LmtleXdvcmRzICYmIHJvdy5rZXl3b3Jkcy5pbmNsdWRlcygiLCIpKSB7DQogICAgICAvLyDpl5zpjbXlrZfmh4noqbLnlKjpgJfomZ/liIbpmpQs6YCZ5piv5q2j56K655qEDQogICAgfSBlbHNlIGlmIChyb3cua2V5d29yZHMgJiYgIXJvdy5rZXl3b3Jkcy5pbmNsdWRlcygiLCIpKSB7DQogICAgICB3YXJuaW5ncy5wdXNoKGDnrKwgJHtyb3dOdW1iZXJ9IOihjDrpl5zpjbXlrZflu7rorbDnlKjpgJfomZ/liIbpmpTlpJrlgIvoqZ7lvZlgKTsNCiAgICB9DQogIH0pOw0KDQogIHJldHVybiB7DQogICAgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCwNCiAgICBlcnJvcnMsDQogICAgd2FybmluZ3MsDQogICAgZGF0YQ0KICB9Ow0KfTsNCg0KZXhwb3J0IGNvbnN0IHNhbml0aXplRGF0YSA9IChkYXRhOiBDU1ZSb3dbXSk6IGFueVtdID0+IHsNCiAgcmV0dXJuIGRhdGEubWFwKHJvdyA9PiAoew0KICAgIGtleXdvcmRzOiByb3cua2V5d29yZHM/LnNwbGl0KCIsIikubWFwKGsgPT4gay50cmltKCkpLmZpbHRlcihrID0+IGspIHx8IFtdLA0KICAgIHF1ZXN0aW9uOiByb3cucXVlc3Rpb24/LnRyaW0oKSB8fCAiIiwNCiAgICBhbnN3ZXI6IHJvdy5hbnN3ZXI/LnRyaW0oKSB8fCAiIiwNCiAgICBjYXRlZ29yeTogcm93LmNhdGVnb3J5Py50cmltKCkgfHwgIiIsDQogICAgcHJpb3JpdHk6IHBhcnNlSW50KHJvdy5wcmlvcml0eSkgfHwgMSwNCiAgICBlbmFibGVkOiBbInRydWUiLCAiMSJdLmluY2x1ZGVzKHJvdy5lbmFibGVkPy50b0xvd2VyQ2FzZSgpKSB8fCBmYWxzZSwNCiAgICBsYW5ndWFnZTogKHJvdy5sYW5ndWFnZT8udG9Mb3dlckNhc2UoKSBhcyAiemgiIHwgImVuIikgfHwgInpoIg0KICB9KSk7DQp9OyANCg==
